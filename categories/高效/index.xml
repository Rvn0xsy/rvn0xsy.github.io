<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>高效 on 倾旋的博客</title><link>https://payloads.online/categories/%E9%AB%98%E6%95%88/</link><description>Recent content in 高效 on 倾旋的博客</description><generator>Hugo</generator><language>zh-cn</language><copyright>倾旋 All rights reserved</copyright><lastBuildDate>Thu, 09 May 2019 00:00:00 +0000</lastBuildDate><atom:link href="https://payloads.online/categories/%E9%AB%98%E6%95%88/index.xml" rel="self" type="application/rss+xml"/><item><title>Swaks伪造邮件</title><link>https://payloads.online/archivers/2019-05-09/1/</link><pubDate>Thu, 09 May 2019 00:00:00 +0000</pubDate><guid>https://payloads.online/archivers/2019-05-09/1/</guid><description>&lt;h2 id="0x00-swaks"&gt;0x00 swaks&lt;/h2&gt;
&lt;p&gt;swaks - Swiss Army Knife SMTP, the all-purpose smtp transaction tester.&lt;/p&gt;
&lt;p&gt;swaks堪称SMTP协议的瑞士军刀，使用它我们可以灵活的操作SMTP协议报文，这篇文章主要是记录一下我是如何伪造一封邮件绕过gmail的检测。&lt;/p&gt;
&lt;p&gt;通常最简单的发送命令：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;swaks --to user@example.com --server test-server.example.net
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;但是邮件头中会带上&lt;code&gt;X-Mailer&lt;/code&gt;：&lt;/p&gt;
&lt;p&gt;&lt;a href="https://images.payloads.online/74cbdcfa-4f5f-11ec-9bc1-00d861bf4abb.png" data-fancybox="gallery" data-caption="2019-05-09-14-24-53"&gt;
 &lt;img src="https://images.payloads.online/74cbdcfa-4f5f-11ec-9bc1-00d861bf4abb.png" alt="2019-05-09-14-24-53" /&gt;
&lt;/a&gt;
&lt;/p&gt;
&lt;p&gt;同时，SPF检测会FAIL。&lt;/p&gt;
&lt;h2 id="0x01-smtp2go"&gt;0x01 smtp2go&lt;/h2&gt;
&lt;p&gt;这个是从evi1cg师傅那里看到的，smtp2go主要是相当于邮件托管，可以分发子账户进行发送。&lt;/p&gt;
&lt;p&gt;地址：https://support.smtp2go.com/hc/en-gb&lt;/p&gt;
&lt;p&gt;（邮箱注册）普通账户可以免费发1000封邮件。&lt;/p&gt;
&lt;p&gt;分配好账户后，可以通过swaks进行登录发送邮件：&lt;/p&gt;
&lt;p&gt;&lt;a href="https://images.payloads.online/750c7a8a-4f5f-11ec-889d-00d861bf4abb.png" data-fancybox="gallery" data-caption="2019-05-09-14-28-50"&gt;
 &lt;img src="https://images.payloads.online/750c7a8a-4f5f-11ec-889d-00d861bf4abb.png" alt="2019-05-09-14-28-50" /&gt;
&lt;/a&gt;
&lt;/p&gt;
&lt;h2 id="0x02-swaks发送邮件"&gt;0x02 swaks发送邮件&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;swaks --to rvn0xsy@gmail.com --from admin@qq.com --ehlo gmail.com --body hello --server mail.smtp2go.com -p &lt;span style="color:#ae81ff"&gt;2525&lt;/span&gt; -au &amp;lt;USER&amp;gt; -ap &amp;lt;PASS&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;但是上面这个邮件无法绕过SPF。&lt;/p&gt;
&lt;h2 id="0x03-spf验证原理"&gt;0x03 SPF验证原理&lt;/h2&gt;
&lt;p&gt;如果mail.smtp2go.com是我的邮件服务器，那么gmail服务器收到的源IP也肯定是mail.smtp2go.com的IP。&lt;/p&gt;
&lt;p&gt;gmail会校验邮件发送者的IP是否存在于smtp.from的域名spf配置列表里。&lt;/p&gt;
&lt;p&gt;而上面这条命令：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;swaks --to rvn0xsy@gmail.com --from admin@qq.com --ehlo gmail.com --body hello --server mail.smtp2go.com -p &lt;span style="color:#ae81ff"&gt;2525&lt;/span&gt; -au &amp;lt;USER&amp;gt; -ap &amp;lt;PASS&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;smtp.from就是admin@qq.com，和mail.smtp2go.com的IP肯定不同，所以SPF校验失败，而校验失败的邮件，会有很高的几率被扔到垃圾邮件中。&lt;/p&gt;</description></item><item><title>解决Mac OS挂载NTFS格式硬盘无法读写</title><link>https://payloads.online/archivers/2018-10-30/1/</link><pubDate>Tue, 30 Oct 2018 00:00:00 +0000</pubDate><guid>https://payloads.online/archivers/2018-10-30/1/</guid><description>&lt;h2 id="查看分区"&gt;查看分区&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"&gt;&lt;code class="language-sh" data-lang="sh"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;rvn0xsy@Rvn0xsy ~/&amp;gt; diskutil list
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/dev/disk0 &lt;span style="color:#f92672"&gt;(&lt;/span&gt;internal&lt;span style="color:#f92672"&gt;)&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;#: TYPE NAME SIZE IDENTIFIER&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; 0: GUID_partition_scheme 500.3 GB disk0
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; 1: EFI EFI 314.6 MB disk0s1
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; 2: Apple_APFS Container disk1 500.0 GB disk0s2
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/dev/disk1 &lt;span style="color:#f92672"&gt;(&lt;/span&gt;synthesized&lt;span style="color:#f92672"&gt;)&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;#: TYPE NAME SIZE IDENTIFIER&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; 0: APFS Container Scheme - +500.0 GB disk1
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; Physical Store disk0s2
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; 1: APFS Volume Macintosh HD 209.0 GB disk1s1
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; 2: APFS Volume Preboot 25.1 MB disk1s2
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; 3: APFS Volume Recovery 515.8 MB disk1s3
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; 4: APFS Volume VM 3.2 GB disk1s4
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/dev/disk2 &lt;span style="color:#f92672"&gt;(&lt;/span&gt;external, physical&lt;span style="color:#f92672"&gt;)&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;#: TYPE NAME SIZE IDENTIFIER&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; 0: disk *2.0 TB disk2
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;rvn0xsy@Rvn0xsy ~/&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;那个&lt;code&gt;/dev/disk2&lt;/code&gt;是我的硬盘&lt;/p&gt;</description></item><item><title>Python virtualenv</title><link>https://payloads.online/archivers/2018-08-16/1/</link><pubDate>Thu, 16 Aug 2018 00:00:00 +0000</pubDate><guid>https://payloads.online/archivers/2018-08-16/1/</guid><description>&lt;h2 id="0x00-virtualenv-简介"&gt;0x00 virtualenv 简介&lt;/h2&gt;
&lt;p&gt;virtualenv 用来建立一个虚拟的python环境，为了解决Python各种库的冲突问题。&lt;/p&gt;
&lt;h2 id="0x01-virtualenv-安装"&gt;0x01 virtualenv 安装&lt;/h2&gt;
&lt;h3 id="通用安装方法"&gt;通用安装方法&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"&gt;&lt;code class="language-sh" data-lang="sh"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;pip install virtualenv
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="ubuntukalidebian"&gt;Ubuntu/Kali/Debian&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"&gt;&lt;code class="language-sh" data-lang="sh"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;apt-get upgrade &lt;span style="color:#f92672"&gt;&amp;amp;&amp;amp;&lt;/span&gt; apt-get update
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;apt-get install virtualenv
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="0x02-virtualenv-使用"&gt;0x02 virtualenv 使用&lt;/h2&gt;
&lt;h3 id="帮助信息"&gt;帮助信息&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"&gt;&lt;code class="language-sh" data-lang="sh"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;~$ virtualenv -h
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Usage: virtualenv &lt;span style="color:#f92672"&gt;[&lt;/span&gt;OPTIONS&lt;span style="color:#f92672"&gt;]&lt;/span&gt; DEST_DIR
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Options:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; --version 显示程序的版本号并退出
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; -h, --help 显示程序的帮助信息并退出
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; -v, --verbose 增强输出
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; -q, --quiet 减少输出
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; -p PYTHON_EXE, --python&lt;span style="color:#f92672"&gt;=&lt;/span&gt;PYTHON_EXE Python的可执行路径&lt;span style="color:#f92672"&gt;(&lt;/span&gt;/usr/bin/python&lt;span style="color:#f92672"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; --clear 清除安装的库
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; --no-site-packages 给出一个干净的环境，不包含系统已安装的库
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; --system-site-packages 包含系统库
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; --always-copy 始终复制文件而不是符号链接。
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; --relocatable 使一个现有的virtualenv环境这会修复脚本并生成所有.pth文件
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; --no-setuptools 不要在新的virtualenv中安装setuptools
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; --no-pip 不要在新的virtualenv中安装pip
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; --no-wheel 不要在新的virtualenv中安装wheel
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; --extra-search-dir&lt;span style="color:#f92672"&gt;=&lt;/span&gt;DIR 在DIR中寻找setuptools/pip
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; --download 从PyPI下载预安装的软件包
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; --no-download, --never-download 不要从PyPI下载预安装的软件包
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; --prompt&lt;span style="color:#f92672"&gt;=&lt;/span&gt;PROMPT 为此环境提供备用提示前缀
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; --setuptools 已废弃
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; --distribute 已废弃
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; --unzip-setuptools 已废弃
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="查看当前版本"&gt;查看当前版本&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"&gt;&lt;code class="language-sh" data-lang="sh"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;~$ virtualenv --version
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;16.0.0
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="配置一个新的环境"&gt;配置一个新的环境&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-text-size-adjust:none;"&gt;&lt;code class="language-sh" data-lang="sh"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;~$ which python &lt;span style="color:#75715e"&gt;# 查看Python路径&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/usr/bin/python
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;~$ virtualenv --no-site-packages -p /usr/bin/python MyNewEnv &lt;span style="color:#75715e"&gt;# 创建环境目录&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Running virtualenv with interpreter /usr/bin/python
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;New python executable in /home/liyingzhe/MyNewEnv/bin/python
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Installing setuptools, pip, wheel...done.
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;~$ ls MyNewEnv/ &lt;span style="color:#75715e"&gt;# 查看环境目录&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;bin include lib local pip-selfcheck.json
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;~$ source MyNewEnv/bin/activate &lt;span style="color:#75715e"&gt;# 将环境生效&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;(&lt;/span&gt;MyNewEnv&lt;span style="color:#f92672"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;(&lt;/span&gt;MyNewEnv&lt;span style="color:#f92672"&gt;)&lt;/span&gt; ~$ pip list &lt;span style="color:#75715e"&gt;# 查看已安装的库&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Package Version
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;---------- -------
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;pip 18.0
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;setuptools 40.0.0
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;wheel 0.31.1
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;此时我们可以安装一些新的库&lt;/p&gt;</description></item></channel></rss>