<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Web安全 on 倾旋的博客</title><link>https://payloads.online/categories/web%E5%AE%89%E5%85%A8/</link><description>Recent content in Web安全 on 倾旋的博客</description><generator>Hugo</generator><language>zh-cn</language><copyright>倾旋 All rights reserved</copyright><lastBuildDate>Sun, 04 Nov 2018 00:00:00 +0000</lastBuildDate><atom:link href="https://payloads.online/categories/web%E5%AE%89%E5%85%A8/index.xml" rel="self" type="application/rss+xml"/><item><title>ASP.NET 文件上传黑名单解决办法</title><link>https://payloads.online/archivers/2018-11-04/1/</link><pubDate>Sun, 04 Nov 2018 00:00:00 +0000</pubDate><guid>https://payloads.online/archivers/2018-11-04/1/</guid><description>&lt;h2 id="aspnet-文件上传黑名单解决办法"&gt;ASP.NET 文件上传黑名单解决办法&lt;/h2&gt;
&lt;p&gt;来源：https://poc-server.com/blog/2018/05/22/rce-by-uploading-a-web-config/&lt;/p&gt;
&lt;p&gt;同过上传web.config配置文件可以使得任意扩展名的文件以脚本代码运行&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-xml" data-lang="xml"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&amp;lt;?xml version=&amp;#34;1.0&amp;#34; encoding=&amp;#34;UTF-8&amp;#34;?&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;&amp;lt;configuration&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;system.webServer&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;handlers&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;accessPolicy=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;Read, Script, Write&amp;#34;&lt;/span&gt;&lt;span style="color:#f92672"&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;add&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;name=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;web_config&amp;#34;&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;path=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;*.jpa&amp;#34;&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;verb=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;*&amp;#34;&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;modules=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;IsapiModule&amp;#34;&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;scriptProcessor=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;%windir%\system32\inetsrv\asp.dll&amp;#34;&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;resourceType=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;Unspecified&amp;#34;&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;requireAccess=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;Write&amp;#34;&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;preCondition=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;bitness64&amp;#34;&lt;/span&gt; &lt;span style="color:#f92672"&gt;/&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;/handlers&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;security&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;requestFiltering&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;fileExtensions&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;remove&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;fileExtension=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;.jpa&amp;#34;&lt;/span&gt; &lt;span style="color:#f92672"&gt;/&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;/fileExtensions&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;hiddenSegments&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;remove&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;segment=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;web.config&amp;#34;&lt;/span&gt; &lt;span style="color:#f92672"&gt;/&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;/hiddenSegments&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;/requestFiltering&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;/security&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;/system.webServer&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;appSettings&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;&amp;lt;/appSettings&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;&amp;lt;/configuration&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;上传完成web.config到Web目录下后，可以再上传&lt;code&gt;*.jpa&lt;/code&gt;的扩展名文件达到执行任意代码的目的。&lt;/p&gt;</description></item><item><title>xssValidator</title><link>https://payloads.online/archivers/2018-10-19/1/</link><pubDate>Fri, 19 Oct 2018 00:00:44 +0000</pubDate><guid>https://payloads.online/archivers/2018-10-19/1/</guid><description>&lt;h2 id="0x00-前言"&gt;0x00 前言&lt;/h2&gt;
&lt;p&gt;xss Validator是一个Burp商店的一个高分插件，该插件依赖于&lt;a href="http://phantomjs.org"&gt;phantomjs&lt;/a&gt;项目以及Burp的Intruder模块。&lt;/p&gt;
&lt;h2 id="0x01-安装"&gt;0x01 安装&lt;/h2&gt;
&lt;h3 id="安装插件"&gt;安装插件&lt;/h3&gt;
&lt;p&gt;打开Burp，点击“Extender”-&amp;gt;“BApp Store”-&amp;gt;&amp;ldquo;XSS Validator&amp;rdquo;-&amp;gt;“install”&lt;/p&gt;
&lt;p&gt;&lt;img src="https://images.payloads.online/334a8eca-4f5f-11ec-b118-00d861bf4abb.png" alt=""&gt;&lt;/p&gt;
&lt;h3 id="安装phantomjs"&gt;安装phantomjs&lt;/h3&gt;
&lt;p&gt;下载页面：http://phantomjs.org/download.html&lt;/p&gt;
&lt;p&gt;可根据自己的操作系统类型，选择对应的版本，我这里是Mac OSX&lt;/p&gt;
&lt;p&gt;然后下载&lt;a href="https://github.com/PortSwigger/xss-validator/raw/master/xss-detector/xss.js"&gt;xss.js&lt;/a&gt;，将它放入phantomjs的执行目录。&lt;/p&gt;
&lt;h2 id="0x02-测试之前的步骤"&gt;0x02 测试之前的步骤&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-sh" data-lang="sh"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;rvn0xsy@Rvn0xsy ~/G/p/bin&amp;gt; pwd
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/Users/rvn0xsy/GitProject/phantomjs-2.1.1-macosx/bin
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;rvn0xsy@Rvn0xsy ~/G/p/bin&amp;gt; ls
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;phantomjs xss.js
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;rvn0xsy@Rvn0xsy ~/G/p/bin&amp;gt; ./phantomjs xss.js &lt;span style="color:#75715e"&gt;# 启动监听&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;这时回到Burp的xss Validator插件页面：&lt;/p&gt;
&lt;p&gt;&lt;img src="https://images.payloads.online/339905be-4f5f-11ec-bdc6-00d861bf4abb.png" alt=""&gt;&lt;/p&gt;
&lt;p&gt;其中：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Grep Phrase&lt;/code&gt;是XSS执行成功后，能够解析出的字符串，支持自定义。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Javascript function&lt;/code&gt;是验证函数，会被解析的时候调用。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Javascript event handlers&lt;/code&gt;是监听事件。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Payloads&lt;/code&gt;是测试XSS的模板，必须包含&lt;code&gt;{JAVASCRIPT}&lt;/code&gt;，否则无法判断状态&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="0x03-测试演示"&gt;0x03 测试演示&lt;/h2&gt;
&lt;video src="https://images.payloads.online/33e2dd38-4f5f-11ec-a918-00d861bf4abb.mp4" controls="controls" width="500px"&gt;
哎呀~ 换个浏览器试试吧！
&lt;/video&gt;</description></item><item><title>CTF - 美眉的手机号</title><link>https://payloads.online/archivers/2017-11-14/1/</link><pubDate>Tue, 14 Nov 2017 00:00:00 +0000</pubDate><guid>https://payloads.online/archivers/2017-11-14/1/</guid><description>&lt;h2 id="0x00-前言"&gt;0x00 前言&lt;/h2&gt;
&lt;p&gt;十一月十一号，在北科大参加了一场CTF，也是第一次投身真正的比赛&lt;/p&gt;
&lt;p&gt;个人感觉，CTF并不是一种学习方式，但是绝对可以考验你的技术深度，这次去北京，确实感受到了那种极客精神，不管题目难或易，都有可圈可点之处，我将他们看作一道道关卡，将自己掌握的知识不断融合，去开辟新的思路，我很享受这个过程，其中，主要做了两道比较深刻的题目，在这里拿出来与大家分享，由于当时场地不允许连接外网，不能查阅资料，更获取不到服务器上的题目源代码，我只能回忆题目中的逻辑，通过PHP将它实现，略有改动。&lt;/p&gt;
&lt;p&gt;我自己还原的源代码可以在这里看到：&lt;code&gt;https://github.com/Rvn0xsy/ctf_get_phone&lt;/code&gt;&lt;/p&gt;
&lt;h2 id="0x01-题目"&gt;0x01 题目&lt;/h2&gt;
&lt;p&gt;大概意思是拿到管理员的手机号码，这个手机号码是flag。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;你能获得女神的手机号吗？ 就在这里，存在一个高危漏洞，并且使用工具是无法达到目的的，追女神还是要用真心呀！！&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;&lt;img src="https://images.payloads.online/e62c2c02-4f5e-11ec-a5af-00d861bf4abb.png" alt="login.php"&gt;&lt;/p&gt;
&lt;h2 id="0x02-细节分析"&gt;0x02 细节分析&lt;/h2&gt;
&lt;p&gt;我首先使用自己手中的字典进行了一轮爆破，爆破的同时去注册了两个账号。&lt;/p&gt;
&lt;p&gt;&lt;img src="https://images.payloads.online/e66d3be8-4f5e-11ec-8b5d-00d861bf4abb.png" alt="register.php"&gt;&lt;/p&gt;
&lt;p&gt;注册需要提供：&lt;/p&gt;
&lt;p&gt;| username | password | phone |&lt;/p&gt;
&lt;p&gt;这时，爆破未果，既然是一个高危漏洞，概率不会依附在“弱口令”上 （安慰一下自己）。&lt;/p&gt;
&lt;p&gt;注册的两个账号，第一个是用于正常查看，第二个放入一些让SQL语句报错的关键字，例如：“ &amp;rsquo; 、* 、) ”&lt;/p&gt;
&lt;p&gt;但是第一个注册成功了，第二个提示phone必须是数字，这个提示信息是由客户端脚本提示的&lt;/p&gt;
&lt;p&gt;于是我猜想会不会服务器端没有验证呢？&lt;/p&gt;
&lt;p&gt;使用Burp提交后还是失败 :(&lt;/p&gt;
&lt;p&gt;先不管这个，第一步就要把所有的信息搜集完毕再说。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-javascript" data-lang="javascript"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;$&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;#register&amp;#34;&lt;/span&gt;).&lt;span style="color:#a6e22e"&gt;bind&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#39;click&amp;#39;&lt;/span&gt;,&lt;span style="color:#66d9ef"&gt;function&lt;/span&gt;(){
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;var&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;usernameObj&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;$&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;#username&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;var&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;passwordObj&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;$&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;#password&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;var&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;phoneObj&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;$&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;#phone&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;var&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;usernameVal&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;usernameObj&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;val&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;var&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;passwordVal&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;passwordObj&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;val&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;var&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;phoneVal&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;phoneObj&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;val&lt;/span&gt;();
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt;(&lt;span style="color:#a6e22e"&gt;usernameVal&lt;/span&gt; &lt;span style="color:#f92672"&gt;==&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;&amp;#34;&lt;/span&gt; &lt;span style="color:#f92672"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;usernameVal&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;length&lt;/span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;4&lt;/span&gt;){
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;alert&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;Username is empty or short!&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;false&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt;(&lt;span style="color:#a6e22e"&gt;passwordVal&lt;/span&gt; &lt;span style="color:#f92672"&gt;==&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;&amp;#34;&lt;/span&gt; &lt;span style="color:#f92672"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;passwordVal&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;length&lt;/span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;4&lt;/span&gt;){
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;alert&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;Password is empty or short!&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;false&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt;(&lt;span style="color:#a6e22e"&gt;phoneVal&lt;/span&gt; &lt;span style="color:#f92672"&gt;==&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;&amp;#34;&lt;/span&gt; &lt;span style="color:#f92672"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;phoneVal&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;length&lt;/span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;11&lt;/span&gt;){
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;alert&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;Phone is empty or short!&amp;#34;&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;false&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;$&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;post&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;/ctf/api.php?method=register&amp;#34;&lt;/span&gt;,{
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;username&amp;#34;&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;usernameVal&lt;/span&gt;,&lt;span style="color:#e6db74"&gt;&amp;#34;password&amp;#34;&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;passwordVal&lt;/span&gt;,&lt;span style="color:#e6db74"&gt;&amp;#34;phone&amp;#34;&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;phoneVal&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; },&lt;span style="color:#66d9ef"&gt;function&lt;/span&gt;(&lt;span style="color:#a6e22e"&gt;data&lt;/span&gt;,&lt;span style="color:#a6e22e"&gt;status&lt;/span&gt;){
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;var&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;obj&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;jQuery&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;parseJSON&lt;/span&gt;(&lt;span style="color:#a6e22e"&gt;data&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;console&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;log&lt;/span&gt;(&lt;span style="color:#a6e22e"&gt;obj&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;status&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt;(&lt;span style="color:#a6e22e"&gt;obj&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;status&lt;/span&gt;){
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;alert&lt;/span&gt;(&lt;span style="color:#a6e22e"&gt;obj&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;data&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; window.&lt;span style="color:#a6e22e"&gt;location&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;href&lt;/span&gt;&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#39;/ctf/index.php&amp;#39;&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;true&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }&lt;span style="color:#66d9ef"&gt;else&lt;/span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;alert&lt;/span&gt;(&lt;span style="color:#e6db74"&gt;&amp;#34;Error :&amp;#34;&lt;/span&gt; &lt;span style="color:#f92672"&gt;+&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;obj&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;data&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;false&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; })
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; });
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;上面是绑定的点击事件，提交到&lt;code&gt;/ctf/api.php?method=register&lt;/code&gt;&lt;/p&gt;</description></item><item><title>Tomcat 开启 https支持</title><link>https://payloads.online/archivers/2017-08-21/1/</link><pubDate>Mon, 21 Aug 2017 00:00:00 +0000</pubDate><guid>https://payloads.online/archivers/2017-08-21/1/</guid><description>&lt;h2 id="0x00-配置keystore"&gt;0x00 配置keystore&lt;/h2&gt;
&lt;p&gt;要使用ssl connector，必须先创建一个keystore。他包含了服务器中被客户端用于验证服务器的数字证书。一旦客户端接受了这个证书，客户端就可以使用public key去加密他们要发送的数据。而服务器，拥有一个private key，作为唯一解密数据的密钥。&lt;/p&gt;
&lt;p&gt;进入JDK环境的bin目录，调用keytool来完成我们的证书生成：&lt;/p&gt;
&lt;p&gt;&lt;code&gt;keytool -genkey -alias tomcat -keyalg RSA&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;-genkey:创建一个public-private key pair&lt;/li&gt;
&lt;li&gt;-alias tomcat：用户别名为tomcat&lt;/li&gt;
&lt;li&gt;-keyalg RSA： 使用RSA算法。 MD5算法也是被支持的，但是建议使用RSA获得更好的兼容。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src="https://images.payloads.online/e5c1e982-4f5e-11ec-93d0-00d861bf4abb.jpg" alt="生成证书"&gt;&lt;/p&gt;
&lt;p&gt;生成证书后，此证书会被保存在当前用户主目录下。&lt;/p&gt;
&lt;h2 id="0x01-修改配置文件"&gt;0x01 修改配置文件&lt;/h2&gt;
&lt;p&gt;找到tomcat目录下的&lt;code&gt;conf/server.xml&lt;/code&gt;，将原来的&lt;code&gt;Connector &lt;/code&gt;更改一下即可。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-xml" data-lang="xml"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&amp;lt;!--
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; &amp;lt;Connector port=&amp;#34;8443&amp;#34; protocol=&amp;#34;HTTP/1.1&amp;#34; SSLEnabled=&amp;#34;true&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; maxThreads=&amp;#34;150&amp;#34; scheme=&amp;#34;https&amp;#34; secure=&amp;#34;true&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; clientAuth=&amp;#34;false&amp;#34; sslProtocol=&amp;#34;TLS&amp;#34; /&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt; --&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;改成：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-xml" data-lang="xml"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;&amp;lt;Connector&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;port=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;端口&amp;#34;&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;protocol=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;org.apache.coyote.http11.Http11Protocol&amp;#34;&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;maxThreads=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;150&amp;#34;&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;SSLEnabled=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;true&amp;#34;&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;scheme=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;https&amp;#34;&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;secure=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;true&amp;#34;&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;clientAuth=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;false&amp;#34;&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;sslProtocol=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;TLS&amp;#34;&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;keystoreFile=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;keystore文件路径&amp;#34;&lt;/span&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;keystorePass=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;口令&amp;#34;&lt;/span&gt; &lt;span style="color:#f92672"&gt;/&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;重启tomcat后生效~&lt;/p&gt;</description></item></channel></rss>